# Taxonomy metadata table

## Notes:
* At least some of these fields could potentially be populated using metadata collected on samples and primary data.

## Columns:

**Taxonomy ID**: An identifier uniquely tagging a taxonomy of the format CCN[YYYYMMDD][#]. e.g. CCN201910120.

**species_id**: Ontology ID for species from which the sample was taken (NCBI taxon).

**species_name**: Name of species corresponding NCBI taxon ID given.

**brain_region_id**: Ontology ID of brain region the sample was taken from.

**brain_region_name**: Name or abbreviation of brain region corresponding to ontology ID given.

**assay_id**: Ontology ID for assay used.

**assay_name**: Name of assay used.

**Provenance**: If published, provenance should be recorded using a DOI. Otherwise some other tracking ID may be used here. Separate multiple entries with a '|'.

# Taxonomy table


## Columns:

**cell_set_accession** (compulsory): Primary identifier of the cell set. This field should be programatically assigned, not edited.

**cell_type_name** (Optional): The primary name/symbol to be used for the (provisional) cell type defined by this cell set.  This is left optional, but is strongly encouraged for every node that is linked.

**parent_cell_set_accession** (compulsory): The cell set accession of the parent cell set in the taxonomy. This field should be programatically assigned, not edited.

**synonyms** (optional): A list of alternative names for this cell type. Separate entries with a '|'. Do not use terms with a scope that is much narrower or broader than the cell type being described.

**synonym_provenance** (optional): Each entry in the synonyms field should have a corresponding entry here,  either the DOI of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678).  Multiple entries should be separated by a '|'.

**description (optional):** Optional free text description of the cluster.  This could be particularly useful for descrbing the properties of cells clustered from techniques that provide data on morphology, function and conectivity, e.g. patch-seq & epi-retro-seq.

**classifying_ontology_term_id** (compulsory): The ID of an ontology term that classifies the cell type defined by this node.

**classifying ontology term name** (compulsory): The name of the ontology term in the classification_id column.

**classification_provenance** (compulsory): Either the DOI(s) of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678).  Multiple entries should be separated by a '|'.

**classification_comment**: A free text comment describing the evidence for this classification.

**rank** (optional): One of: 'leaf_node', 'family', 'gross'.  Background: Algorithmically generated hierarchical taxonomies can be complex, with many nodes between root and leaf and branches of variable depth. To simplify this for display and discussion it can be useful to assign nodes to a 3 level hierarchy, with leaf nodes at the bottom.

## Notes on tooling suport: 

* As for CCN1, cell set accessions will be autogenerated by CCN2 tooling, extending taxonomy ID CCN[YYYYMMDD][#] -> CCN[YYYYMMDD][#]\_n. e.g.  CCN201910120\_1
* The NanoBot GUI curation tool will support autocomplete across relevant ontoogy terms on the column pair: cell_set_accession/cell_type name
* The value of 'rank' will be driven by a picklist in the NanoBot GUI curation tool.

# Cross taxonomy mapping table

## Columns:

**cell_set_accession** (compulsory): Primary identifier of the cell set.

**cell_type_name** (compulsory): The primary name/symbol of the (provisional) cell type defined by this cell set.

**mapped_cell_set_accession** (compulsory): The accession (ID) of a cell set in a second taxonomy that this cell set maps to.

**mapped_cell_type_name** (compulsory): The name of the cell type corresponding to the mapped_cell_set_accession.

**evidence_comment** (compulsory): A free text description of the evidence supporting this mapping. If a similarity_score is include, please also include details of how this was calculated.

**similarity_score** (optional): A score recording the similarity between mapped nodes.

**provenance** (compulsory): ORCID of the person doing the mapping using the syntax ORCID:0123-4567-890. Optionally include supporting publications using DOIs of the form doi:10.1126/journal.abj6641.

## Notes on tooling suport: 

The NanoBot GUI curation tool will support loading of 2 taxonomies and manual addition of mappings via:
* Terms selected from 2 taxonomy trees
* Autocomplete on pairs of columns: cell_set_accession/cell_type name; maped_cell_set_accession/mapped_cell_type_name.

We also anticipate that users may wish to populate the linking table programatically, e.g. where similarity scores are generated by analysis pipeline.

# location mapping table

## Columns:

**cell_set_accession** (compulsory): Primary identifier for cell set.

**cell_type_name** (compulsory): The primary name/symbol to be used for the cell type defined by this cell set.

**location_ontology_term_id** (compulsory): The ID of an ontology term that refers to a brain region that this cell type is located in. Ideally this should be the ID of a term defined as a region in a standard atlas.

**location_ontology_term_name** (compulsory): Name of the term whose ID is recorded in the ontology_term_id field.

**evidence_comment** (optional): A comment describing the evidence for this location mapping

**supporting_data** (optional): A link to data supporting this location mapping.

**provenance** (compulsory): ORCID of the person doing the mapping using the syntax ORCID:0123-4567-890. Optionally include supporting publications using DOIs of the form doi:10.1126/journal.abj6641.

## Notes on tooling:

The NanoBot GUI curation tool will support autocomplete on pairs of columns: cell_set_accession/cell_type name; ontology_term_id/ontology_term_name. The tool will be configurable to take the IDs and names of ontologies representing specific standard atlases.

Multiple locations can be recorded as multiple rows with the same cell set accession.
